{"version":3,"names":["throwNotImplementedOnRNWeb","jest","fn","Error","exports","Host","constructor","CanvasKit","_defineProperty","BaseHostObject","ref","typename","__typename__","dispose","Symbol","delete","HostObject","fromValue","value","getEnum","name","v","e","result","Object","values","find","optEnum","undefined"],"sources":["Host.ts"],"sourcesContent":["import type { CanvasKit, EmbindEnumEntity } from \"canvaskit-wasm\";\n\nimport type { SkJSIInstance } from \"../types\";\n\nexport const throwNotImplementedOnRNWeb = <T>(): T => {\n  if (typeof jest !== \"undefined\") {\n    return jest.fn() as unknown as T;\n  }\n  throw new Error(\"Not implemented on React Native Web\");\n};\n\nexport abstract class Host {\n  readonly CanvasKit: CanvasKit;\n\n  constructor(CanvasKit: CanvasKit) {\n    this.CanvasKit = CanvasKit;\n  }\n}\n\nexport abstract class BaseHostObject<T, N extends string>\n  extends Host\n  implements SkJSIInstance<N>\n{\n  readonly __typename__: N;\n  ref: T;\n\n  constructor(CanvasKit: CanvasKit, ref: T, typename: N) {\n    super(CanvasKit);\n    this.ref = ref;\n    this.__typename__ = typename;\n  }\n\n  dispose() {\n    this[Symbol.dispose]();\n  }\n\n  [Symbol.dispose](): void {\n    if (\n      this.ref !== null &&\n      typeof this.ref === \"object\" &&\n      \"delete\" in this.ref &&\n      typeof this.ref.delete === \"function\"\n    ) {\n      this.ref.delete();\n    }\n  }\n}\n\nexport abstract class HostObject<T, N extends string> extends BaseHostObject<\n  T,\n  N\n> {\n  static fromValue<T>(value: SkJSIInstance<string>) {\n    return (value as HostObject<T, string>).ref;\n  }\n}\n\nexport const getEnum = (\n  CanvasKit: CanvasKit,\n  name: keyof CanvasKit,\n  v: number\n): EmbindEnumEntity => {\n  const e = CanvasKit[name];\n  if (typeof e !== \"function\") {\n    throw new Error(`${name} is not an number`);\n  }\n  const result = Object.values(e).find(({ value }) => value === v);\n  if (!result) {\n    throw new Error(\n      `Enum ${name} does not have value ${v} on React Native Web`\n    );\n  }\n  return result;\n};\n\nexport const optEnum = (\n  CanvasKit: CanvasKit,\n  name: keyof CanvasKit,\n  v: number | undefined\n): EmbindEnumEntity | undefined => {\n  return v === undefined ? undefined : getEnum(CanvasKit, name, v);\n};\n"],"mappings":";;;;;;;;;AAIO,MAAMA,0BAA0B,GAAGA,CAAA,KAAY;EACpD,IAAI,OAAOC,IAAI,KAAK,WAAW,EAAE;IAC/B,OAAOA,IAAI,CAACC,EAAE,CAAC,CAAC;EAClB;EACA,MAAM,IAAIC,KAAK,CAAC,qCAAqC,CAAC;AACxD,CAAC;AAACC,OAAA,CAAAJ,0BAAA,GAAAA,0BAAA;AAEK,MAAeK,IAAI,CAAC;EAGzBC,WAAWA,CAACC,SAAoB,EAAE;IAAAC,eAAA;IAChC,IAAI,CAACD,SAAS,GAAGA,SAAS;EAC5B;AACF;AAACH,OAAA,CAAAC,IAAA,GAAAA,IAAA;AAEM,MAAeI,cAAc,SAC1BJ,IAAI,CAEd;EAIEC,WAAWA,CAACC,SAAoB,EAAEG,GAAM,EAAEC,QAAW,EAAE;IACrD,KAAK,CAACJ,SAAS,CAAC;IAACC,eAAA;IAAAA,eAAA;IACjB,IAAI,CAACE,GAAG,GAAGA,GAAG;IACd,IAAI,CAACE,YAAY,GAAGD,QAAQ;EAC9B;EAEAE,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,MAAM,CAACD,OAAO,CAAC,CAAC,CAAC;EACxB;EAEA,CAACC,MAAM,CAACD,OAAO,IAAU;IACvB,IACE,IAAI,CAACH,GAAG,KAAK,IAAI,IACjB,OAAO,IAAI,CAACA,GAAG,KAAK,QAAQ,IAC5B,QAAQ,IAAI,IAAI,CAACA,GAAG,IACpB,OAAO,IAAI,CAACA,GAAG,CAACK,MAAM,KAAK,UAAU,EACrC;MACA,IAAI,CAACL,GAAG,CAACK,MAAM,CAAC,CAAC;IACnB;EACF;AACF;AAACX,OAAA,CAAAK,cAAA,GAAAA,cAAA;AAEM,MAAeO,UAAU,SAA8BP,cAAc,CAG1E;EACA,OAAOQ,SAASA,CAAIC,KAA4B,EAAE;IAChD,OAAQA,KAAK,CAA2BR,GAAG;EAC7C;AACF;AAACN,OAAA,CAAAY,UAAA,GAAAA,UAAA;AAEM,MAAMG,OAAO,GAAGA,CACrBZ,SAAoB,EACpBa,IAAqB,EACrBC,CAAS,KACY;EACrB,MAAMC,CAAC,GAAGf,SAAS,CAACa,IAAI,CAAC;EACzB,IAAI,OAAOE,CAAC,KAAK,UAAU,EAAE;IAC3B,MAAM,IAAInB,KAAK,CAAC,GAAGiB,IAAI,mBAAmB,CAAC;EAC7C;EACA,MAAMG,MAAM,GAAGC,MAAM,CAACC,MAAM,CAACH,CAAC,CAAC,CAACI,IAAI,CAAC,CAAC;IAAER;EAAM,CAAC,KAAKA,KAAK,KAAKG,CAAC,CAAC;EAChE,IAAI,CAACE,MAAM,EAAE;IACX,MAAM,IAAIpB,KAAK,CACb,QAAQiB,IAAI,wBAAwBC,CAAC,sBACvC,CAAC;EACH;EACA,OAAOE,MAAM;AACf,CAAC;AAACnB,OAAA,CAAAe,OAAA,GAAAA,OAAA;AAEK,MAAMQ,OAAO,GAAGA,CACrBpB,SAAoB,EACpBa,IAAqB,EACrBC,CAAqB,KACY;EACjC,OAAOA,CAAC,KAAKO,SAAS,GAAGA,SAAS,GAAGT,OAAO,CAACZ,SAAS,EAAEa,IAAI,EAAEC,CAAC,CAAC;AAClE,CAAC;AAACjB,OAAA,CAAAuB,OAAA,GAAAA,OAAA","ignoreList":[]}