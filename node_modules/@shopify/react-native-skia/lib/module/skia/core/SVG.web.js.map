{"version":3,"names":["useEffect","useState","Skia","useSVG","source","onError","svg","setSVG","undefined","Error","src","default","uri","JSON","stringify","result","fetch","svgStr","text","newSvg","SVG","MakeFromString"],"sources":["SVG.web.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\n\nimport { Skia } from \"../Skia\";\nimport type { DataSourceParam, SkSVG } from \"../types\";\n\nexport const useSVG = (\n  source: DataSourceParam,\n  onError?: (err: Error) => void\n) => {\n  const [svg, setSVG] = useState<SkSVG | null>(null);\n  if (source === null || source === undefined) {\n    throw new Error(`Invalid svg data source. Got: ${source}`);\n  }\n  useEffect(() => {\n    (async () => {\n      let src: string;\n      if (typeof source === \"string\") {\n        src = source;\n      } else if (\n        typeof source === \"object\" &&\n        \"default\" in source &&\n        typeof source.default === \"string\"\n      ) {\n        src = source.default;\n      } else if (typeof source === \"object\" && \"uri\" in source) {\n        src = source.uri;\n      } else {\n        throw new Error(\n          `Invalid svg data source. Make sure that the source resolves to a string. Got: ${JSON.stringify(\n            source,\n            null,\n            2\n          )}`\n        );\n      }\n      const result = await fetch(src);\n      const svgStr = await result.text();\n      const newSvg = Skia.SVG.MakeFromString(svgStr);\n      setSVG(newSvg);\n      if (newSvg === null && onError !== undefined) {\n        onError(new Error(\"Failed to create SVG from source.\"));\n      }\n    })();\n  }, [onError, source]);\n  return svg;\n};\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,SAASC,IAAI,QAAQ,SAAS;AAG9B,OAAO,MAAMC,MAAM,GAAGA,CACpBC,MAAuB,EACvBC,OAA8B,KAC3B;EACH,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGN,QAAQ,CAAe,IAAI,CAAC;EAClD,IAAIG,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAKI,SAAS,EAAE;IAC3C,MAAM,IAAIC,KAAK,CAAC,iCAAiCL,MAAM,EAAE,CAAC;EAC5D;EACAJ,SAAS,CAAC,MAAM;IACd,CAAC,YAAY;MACX,IAAIU,GAAW;MACf,IAAI,OAAON,MAAM,KAAK,QAAQ,EAAE;QAC9BM,GAAG,GAAGN,MAAM;MACd,CAAC,MAAM,IACL,OAAOA,MAAM,KAAK,QAAQ,IAC1B,SAAS,IAAIA,MAAM,IACnB,OAAOA,MAAM,CAACO,OAAO,KAAK,QAAQ,EAClC;QACAD,GAAG,GAAGN,MAAM,CAACO,OAAO;MACtB,CAAC,MAAM,IAAI,OAAOP,MAAM,KAAK,QAAQ,IAAI,KAAK,IAAIA,MAAM,EAAE;QACxDM,GAAG,GAAGN,MAAM,CAACQ,GAAG;MAClB,CAAC,MAAM;QACL,MAAM,IAAIH,KAAK,CACb,iFAAiFI,IAAI,CAACC,SAAS,CAC7FV,MAAM,EACN,IAAI,EACJ,CACF,CAAC,EACH,CAAC;MACH;MACA,MAAMW,MAAM,GAAG,MAAMC,KAAK,CAACN,GAAG,CAAC;MAC/B,MAAMO,MAAM,GAAG,MAAMF,MAAM,CAACG,IAAI,CAAC,CAAC;MAClC,MAAMC,MAAM,GAAGjB,IAAI,CAACkB,GAAG,CAACC,cAAc,CAACJ,MAAM,CAAC;MAC9CV,MAAM,CAACY,MAAM,CAAC;MACd,IAAIA,MAAM,KAAK,IAAI,IAAId,OAAO,KAAKG,SAAS,EAAE;QAC5CH,OAAO,CAAC,IAAII,KAAK,CAAC,mCAAmC,CAAC,CAAC;MACzD;IACF,CAAC,EAAE,CAAC;EACN,CAAC,EAAE,CAACJ,OAAO,EAAED,MAAM,CAAC,CAAC;EACrB,OAAOE,GAAG;AACZ,CAAC","ignoreList":[]}